{% extends 'basePainel.html.twig' %}

{% block principal %}
    

    <div class="card mt-2">
        <div class="card-body">
            <div class="table-responsive">

    <div class="btn-table-up">
          <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th width="5%">Nro.</th>
                            <th width="25%">Título</th>
                            <th width="10%">Data</th>
                            <th width="15%">Cliente</th>
                            <th width="10%">Responsável</th>
                            <th width="5%">Tipo</th>
                            <th width="10%">Prioridade</th>
                            <th width="10%">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in tickets %}
                            <tr>
                                <td><a href="/ti/tickets/form/{{row.id}}">{{row.id}}</a></td>
                                <td>{{row.title}}</td>
                                <td>{{row.created_at|date('d/m/Y')}}</td>
                                <td>{{row.company_name}}</td>
                                <td>{{row.user_name}}</td>
                                <td>{{row.type_name}}</td>
                                <td>
                                    {% if row.priority_id == 1 or row.priority_id == 4 %}
                                        {% set style = 'label label-success' %}
                                    {% elseif row.priority_id == 2 %}
                                        {% set style = 'label label-warning' %}
                                    {% else %}
                                        {% set style = 'label label-danger' %}
                                    {% endif %}
                                    <label class="label {{style}}">{{row.priority_name}}</label>
                                </td>
                                <td>
                                    {% if row.status_id == 1 %}
                                        {% set status_style = 'label label-primary' %}
                                    {% elseif row.status_id == 2 %}
                                        {% set status_style = 'label label-info' %}
                                    {% elseif row.status_id == 3 %}
                                        {% set status_style = 'label label-primary' %}
                                    {% elseif row.status_id == 4 or row.status_id == 6 %}
                                        {% set status_style = 'label label-success' %}
                                    {% else %}
                                        {% set status_style = 'label label-danger' %}
                                    {% endif %}
                                    <label class="label {{status_style}}">{{row.status_name}}</label>
                                </td>
                            </tr>
                        {% else %}
                            <tr><td colspan="8" align="center">Nenhum chamado encontrado.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
    </div>
</div>
</div>


{% endblock %}

{% block javascripts %}
    {{parent()}}
{% endblock %}
